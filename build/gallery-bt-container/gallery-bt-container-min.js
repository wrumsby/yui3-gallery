YUI.add("gallery-bt-container",function(e){var a="heightChange",c="widthChange",b=e.Bottle.Device.getPositionFixedSupport(),d=function(k,j,h){var i,g=j&&b,f=(h!==undefined)?h:this.get("nativeScroll");if(this.get("scrollView")){i=this.get(k?"headerNode":"footerNode");if(i){i.setStyles({position:(f&&g)?"fixed":"",top:(k&&f&&g)?0:"",bottom:(!k&&f&&g)?0:"",zIndex:(f&&g)?50:""});if(b){this.get("scrollView").get("boundingBox").setStyle(k?"marginTop":"marginBottom",(j&&f)?(i.get("offsetHeight")+"px"):0);}}this.get(j?"srcNode":"scrollNode").insert(i,k?0:undefined);this._syncScrollHeight();}};e.namespace("Bottle").Container=e.Base.create("btcontainer",e.Widget,[e.WidgetChild,e.zui.Attribute],{initializer:function(f){this._btcEventHandlers=new e.EventHandle([this.after(a,this._syncScrollHeight),this.on(c,this._syncScrollWidth)]);},destructor:function(){this._btcEventHandlers.detach();if(this.get("rendered")){this.get("scrollView").destroy(true);}delete this._eventHandlers;},renderUI:function(){var j=e.Node.create('<div class="bt-container-scroll"></div>'),k=this.get("srcNode"),h=this.get("headerNode"),i=this.get("bodyNode"),f=this.get("footerNode"),g=new e.ScrollView(e.merge(this.get("cfgScroll"),{srcNode:j}));this.set("scrollNode",j);this.set("scrollView",g);k.append(j);j.append(h);j.append(i);j.append(f);g.render();this.set_again("headerFixed");this.set_again("footerFixed");this.set_again("translate3D");this.set_again("nativeScroll");},_syncScrollWidth:function(g){var f=this.get("scrollView");if(f){f.set("width",g.newVal);}},_syncScrollHeight:function(){var g=this.get("height"),f=this.get("scrollView");if(!f||!g){return;}e.later(1,this,function(){g-=f.get("boundingBox").get("offsetTop");if(this.get("footerFixed")){g-=this.get("footerNode").get("clientHeight");}f.set("height",g);});}},{ATTRS:{nativeScroll:{value:false,validator:e.Lang.isBoolean,setter:function(g){var f=this.get("scrollView");if(f){f.set("disabled",g);if(g){f.unplug(e.zui.RAScroll);}else{f.plug(e.zui.RAScroll,{horizontal:false,cooperation:true});if(!e.Bottle.Device.getTouchSupport()){f.plug(e.zui.ScrollHelper);}}}d.apply(this,[true,this.get("headerFixed"),g]);d.apply(this,[false,this.get("footerFixed"),g]);return g;}},headerNode:{value:undefined,writeOnce:true,setter:function(f){var g=e.one(f);if(g){g.addClass("bt-header");this.set("headerFixed",g.getData("position")==="fixed");return g;}}},footerNode:{value:undefined,writeOnce:true,setter:function(f){var g=e.one(f);if(g){g.addClass("bt-footer");this.set("footerFixed",g.getData("position")==="fixed");return g;}}},bodyNode:{writeOnce:true},scrollNode:{writeOnce:true},scrollView:{writeOnce:true},cfgScroll:{value:{flick:{minDistance:10,minVelocity:0.3}},writeOnce:true,lazyAdd:false},translate3D:{value:true,validator:e.Lang.isBoolean,setter:function(f){this.get("scrollNode").toggleClass("bt-translate3d",f);return f;}},headerFixed:{value:false,validator:e.Lang.isBoolean,setter:function(f){d.apply(this,[true,f]);return f;}},footerFixed:{value:false,validator:e.Lang.isBoolean,setter:function(f){d.apply(this,[false,f]);return f;}}},HTML_PARSER:{headerNode:"> [data-role=header]",bodyNode:"> [data-role=body]",footerNode:"> [data-role=footer]",cfgScroll:function(g){try{return e.JSON.parse(g.getData("cfg-scroll"));}catch(f){}},translate3D:function(f){if(f.getData("translate3d")==="false"){return false;}return true;}}});},"@VERSION@",{requires:["scrollview","widget-child","json-parse","gallery-zui-attribute","gallery-zui-rascroll","gallery-zui-scrollhelper","gallery-bt-device"]});