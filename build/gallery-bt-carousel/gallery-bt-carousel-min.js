YUI.add("gallery-bt-carousel",function(e){var a="widthChange",c="bcr_",f={INDEXBOX:c+"indexbox",INDEXITEM:c+"indexitem",INDEXON:c+"on",LEFT:c+"btnl",RIGHT:c+"btnr",SHOWBUTTON:c+"showbtn",BUTTONOFF:c+"off"},b={INDEXBOX:'<ol class="'+f.INDEXBOX+'"></ol>',INDEXITEM:'<li class="'+f.INDEXITEM+'"></li>',LEFT:'<div class="'+f.LEFT+'"></li>',RIGHT:'<div class="'+f.RIGHT+'"></li>'},d=e.Base.create("btcarousel",e.ScrollView,[e.Bottle.SyncScroll,e.zui.Attribute],{initializer:function(){this.set("syncScrollMethod",this._updatePages);this.plug(e.zui.RAScroll);},destructor:function(){this.unsync("selectedIndex",this.pages,"index");this.unplug(e.zui.RAScroll);this._bcrEventHandlers.detach();delete this._bcrEventHandlers;},renderUI:function(){var j=this.get("indexNode")||this.get("boundingBox"),k=j.appendChild(b.INDEXBOX),i=this.pages.get("total"),h=this.get("contentBox").getData("selected-index")||0,g;this._indexes=[];for(g=0;g<i;g++){this._indexes.push(k.appendChild(b.INDEXITEM));}this.unplug(e.Plugin.ScrollViewScrollbars);if(!e.Bottle.Device.getTouchSupport()){this.plug(e.zui.ScrollHelper);}this._updatePages();this.sync("selectedIndex",this.pages,"index");this.leftButton=j.appendChild(b.LEFT).setHTML(this.get("textLeft"));this.rightButton=j.appendChild(b.RIGHT).setHTML(this.get("textRight"));this._bcrEventHandlers=new e.EventHandle([this.leftButton.on("click",this.pages.prev,this.pages),this.rightButton.on("click",this.pages.next,this.pages)]);e.once("btNative",this._nativeScroll,this);this.set("selectedIndex",h);this._updateButtons(h);},_nativeScroll:function(){this._prevent={move:false,start:false,end:false};},_updateButtons:function(g){if(this.leftButton){this.leftButton.toggleClass(f.BUTTONOFF,(g===0));this.rightButton.toggleClass(f.BUTTONOFF,(g===this.pages.get("total")-1));}},_updatePages:function(){this.get("pageNode").set("offsetWidth",Math.floor(this.get("boundingBox").get("offsetWidth")/this.get("pageItems")));this._uiDimensionsChange();}},{ATTRS:{pageNode:{value:"> li",writeOnce:true,lazyAdd:false,setter:function(g){this._pageCSS=g;return this.get("contentBox").all(g);}},pageItems:{value:1,lazyAdd:false,writeOnce:true,validator:e.Lang.isNumber,setter:function(g){var h=Math.max(1,Math.floor(g));this.plug(e.zui.ScrollSnapper,{selector:this._pageCSS+((h>1)?(":nth-child("+h+"n+1)"):"")});return h;}},indexNode:{writeOnce:true,setter:e.one},textRight:{value:"",writeOnce:true},textLeft:{value:"",writeOnce:true},showButtons:{value:true,lazyAdd:false,validator:e.Lang.isBoolean,setter:function(g){this.get("boundingBox").toggleClass(f.SHOWBUTTON,g);return g;}},selectedIndex:{setter:function(i){var g=this._indexes,k=this.get("selectedIndex"),h=g?g[k]:undefined,j=g?g[i]:undefined;if(j&&(h!==j)){if(h){h.removeClass(f.INDEXON);}j.addClass(f.INDEXON);this._updateButtons(i);return i*1;}return k;}}},HTML_PARSER:{pageItems:function(h){var g=h.getData("page-items");return g?g*1:1;},pageNode:function(h){try{this.setAttrs(e.JSON.parse(h.getData("cfg-scroll")));}catch(g){}return h.getData("page-node");},textLeft:function(g){return g.getData("text-left")||"";},textRight:function(g){return g.getData("text-right")||"";},indexNode:function(g){return g.getData("index-node");},showButtons:function(g){return g.getData("show-buttons")!=="false";}}});e.namespace("Bottle").Carousel=d;},"@VERSION@",{requires:["gallery-bt-syncscroll","gallery-zui-rascroll","gallery-zui-scrollsnapper","gallery-zui-attribute","gallery-zui-scrollhelper"]});