YUI.add("gallery-nmresizer",function(a){a.Nmresizer=a.Base.create("nmresizer",a.Widget,[],{initializer:function(b){},loadAndResize:function(c){if(typeof c.newdiv=="undefined"){return;}else{if(typeof c.resizediv=="undefined"){return;}}if(c.olddiv&&!c.olddiv.match(/^(#|\.)/)){c.olddiv="#"+c.olddiv;}if(!c.newdiv.match(/^(#|\.)/)){c.newdiv="#"+c.newdiv;}if(!c.resizediv.match(/^(#|\.)/)){c.resizediv="#"+c.resizediv;}if(c.resizeclass&&!c.resizeclass.match(/^\./)){c.resizeclass="."+c.resizeclass;}if(typeof c.animDuration!=="undefined"){this.set("animDuration",c.animDuration);}if(typeof c.maxWidth!=="undefined"){c.maxWidth=String(c.maxWidth);if(c.maxWidth.match(/px$/)){c.maxWidth=c.maxWidth.replace(/px$/,"");}this.set("maxWidth",c.maxWidth);}if(typeof c.maxHeight!=="undefined"){c.maxHeight=String(c.maxHeight);if(c.maxHeight.match(/px$/)){c.maxHeight=c.maxHeight.replace(/px$/,"");}this.set("maxHeight",c.maxHeight);}if(typeof c.restrainHeight!=="undefined"){c.restrainHeight=String(c.restrainHeight);if(c.restrainHeight.match(/px$/)){c.restrainHeight=c.restrainHeight.replace(/px$/,"");}this.set("restrainHeight",c.restrainHeight);}if(typeof c.restrainWidth!=="undefined"){c.restrainWidth=String(c.restrainWidth);if(c.restrainWidth.match(/px$/)){c.restrainWidth=c.restrainWidth.replace(/px$/,"");}this.set("restrainWidth",c.restrainWidth);}if(typeof c.offsetWidth!=="undefined"){c.offsetWidth=String(c.offsetWidth);if(c.offsetWidth.match(/px$/)){c.offsetWidth=c.offsetWidth.replace(/px$/,"");}this.set("offsetWidth",c.offsetWidth);}if(typeof c.offsetHeight!=="undefined"){c.offsetHeight=String(c.offsetHeight);if(c.offsetHeight.match(/px$/)){c.offsetHeight=c.offsetHeight.replace(/px$/,"");}this.set("offsetHeight",c.offsetHeight);}c.resizediv=c.resizediv?c.resizediv:c.newdiv;c.oldtabheight=a.one(c.resizediv).getComputedStyle("height");c.oldtabwidth=a.one(c.resizediv).getComputedStyle("width");if(a.one(c.newdiv+" img")){var f=a.all(c.newdiv+" img").size();var e=0;var b=[];var d=this;a.all(c.newdiv+" img").each(function(h,g){if(h.get("src")&&h.get("src").match(/\.(jpg|jpeg|gif|png)$/i)){b[g]=new Image();b[g].src=h.get("src");b[g].onload=function(){e++;if(e==f){d.doLoadAndResize(c);}};b[g].onerror=function(){e++;if(e==f){d.doLoadAndResize(c);}};}else{f--;if(!f){this.doLoadAndResize(c);}}},this);}else{this.doLoadAndResize(c);}},doLoadAndResize:function(b){var e=this.get("restrainWidth")?this.get("restrainWidth")+"px":"auto";var d=this.get("restrainHeight")?this.get("restrainHeight")+"px":"auto";a.one(b.newdiv).setStyles({display:"block",position:"absolute",left:"-5000px",visibility:"hidden",width:e,height:d});a.one(b.newdiv).removeClass("displaynone");if(typeof b.noWidthResize=="undefined"||!b.noWidthResize){b.newtabwidth=parseInt(a.one(b.newdiv).get("offsetWidth"))+parseInt(this.get("offsetWidth"))+"px";if(this.get("maxWidth")&&parseInt(b.newtabwidth,10)>this.get("maxWidth")){b.newtabwidth=this.get("maxWidth")+"px";}}if(typeof b.noHeightResize=="undefined"||!b.noHeightResize){b.newtabheight=parseInt(a.one(b.newdiv).get("offsetHeight"))+parseInt(this.get("offsetHeight"))+"px";if(this.get("maxHeight")&&parseInt(b.newtabheight,10)>this.get("maxHeight")){b.newtabheight=this.get("maxHeight")+"px";}}if(b.onStart){b.onStart(b);}a.one(b.newdiv).setStyles({position:"",left:""});a.one(b.resizediv).setStyles({width:b.oldtabwidth,height:b.oldtabheight});if(b.olddiv!==b.newdiv){a.one(b.olddiv).setStyles({display:"none",width:"",height:""});}if(b.oldtabheight==b.newtabheight&&b.oldtabwidth==b.newtabwidth){a.one(b.newdiv).setStyles({display:"block",visibility:"visible"});if(b.resizediv!==b.newdiv){a.one(b.newdiv).setStyles({width:"auto",height:"auto"});}if(b.onEnd){b.onEnd(b);}}else{var c={easing:"ease-out",duration:this.get("animDuration")};if(typeof b.newtabwidth!=="undefined"){c.width=b.newtabwidth;}if(typeof b.newtabheight!=="undefined"){c.height=b.newtabheight;}if(typeof b.resizeclass!=="undefined"&&b.resizeclass){b.resizediv=b.resizeclass;}a.all(b.resizediv).transition(c,function(){a.one(b.newdiv).setStyles({visibility:"visible"});if(b.resizediv!==b.newdiv){a.one(b.newdiv).setStyles({width:"auto",height:"auto"});}if(b.onEnd){b.onEnd(b);}});}}},{ATTRS:{animDuration:{value:0.5},maxHeight:{value:0},maxWidth:{value:0},restrainHeight:{value:0},restrainWidth:{value:0},offsetWidth:{value:0},offsetHeight:{value:0}}});},"gallery-2012.10.03-20-02",{requires:["base-build","widget","event-mouseenter","node","transition"]});