YUI.add("gallery-bt-loader",function(e){var d="blo_",h={ERROR:d+"error",LOADING:d+"loading",LOADED:d+"loaded"},c={append:function(k,j,i){j.addClass(h.LOADED);k.append(i);},insert:function(k,j,i){j.addClass(h.LOADED);k.insert(i,0);},refresh:function(k,j,i){j.addClass(h.LOADED);k.insert(i,"replace");},replace:function(k,j,i){j.addClass(h.LOADED).replace(i);}},g={json:function(j){try{return e.JSON.parse(j);}catch(i){return null;}},none:function(i){return i;}},a={json:function(l,k){var j=k.split(/\./),i;for(i=0;i<j.length;i++){l=l[j[i]];if(l===undefined){return;}}return l;},none:function(j,i){return(i==="*")?j:e.Selector.query(i,e.DOM.create(j),true);}},b=function(i){return c[i]?true:false;},f=e.Base.create("btloader",e.Widget,[e.Bottle.SyncScroll],{initializer:function(){var i=this.get("contentBox");this._bloEventHandlers=new e.EventHandle([i.delegate("click",this._handleClick,this.get("actionNode"),this)]);},destructor:function(){this._bloEventHandlers.detach();delete this._bloEventHandlers;},bindUI:function(){},_handleClick:function(i){var j=i.currentTarget;j.removeClass(h.ERROR).addClass(h.LOADING);i.preventDefault();e.io(j.getAttribute(this.get("actionAttr")),{on:{success:this._handleIOSuccess,failure:this._handleIOFailure},context:this,arguments:{target:j}});},_handleIOSuccess:function(p,k,i){var o=this.get("parser"),m=o(k.responseText),n=i.target,j=n.getData("action"),l=b(j)?j:this.get("action");n.removeClass(h.LOADING);if(!m){return this._handleIOFailure(p,k,i);}if(this._selector){m=this._selector(m,this.get("selector"));}c[l](this.get("contentBox"),n,m);this.syncScroll();},_handleIOFailure:function(l,j,i){var k=i.target;k.removeClass(h.LOADING).addClass(h.ERROR);}},{ATTRS:{actionNode:{writeOnce:true,validator:e.Lang.isString},actionAttr:{validator:e.Lang.isString},action:{validator:b},parser:{validator:function(i){return e.Lang.isFunction(i)||(g[i]?true:false);},setter:function(i){if(g[i]){this._selector=a[i];}return g[i]||i;}},selector:{validator:e.Lang.isString}},HTML_PARSER:{actionNode:function(i){return i.getData("action-node")||"a";},actionAttr:function(i){return i.getData("action-attr")||"href";},action:function(i){return i.getData("action")||"append";},parser:function(i){return i.getData("parser")||"none";},selector:function(i){return i.getData("selector")||"*";}}});e.namespace("Bottle").Loader=f;},"@VERSION@",{requires:["gallery-bt-syncscroll","io-base","json-parse"]});