YUI.add("gallery-itsaselectlist",function(a){var d=a.Lang,g=a.Node,f=a.UA.ie,j="itsa-hidden",b="Selectlist Shim",c='<iframe frameborder="0" tabindex="-1" class="itsa-shim" title="'+b+'" src="javascript:false;"></iframe>',h="<span class='itsa-selectlist-selectedmain' unselectable='on'></span>",k="<button class='yui3-button'></button>",e="<span class='itsa-button-icon itsa-icon-selectdown'></span>",i="<div class='itsa-selectlist-basediv "+j+"'><div class='itsa-selectlist-scrolldiv'><ul class='itsa-selectlist-ullist'></ul></div></div>";a.ITSASelectList=a.Base.create("itsaselectlist",a.Widget,[],{buttonNode:null,_selectedMainItemNode:null,_selectedItemClass:null,_itemsContainerNode:null,_itemValues:null,_syncWithinSetterItems:false,initializer:function(m){var l=this;l._selectedItemClass=l.get("hideSelected")?j:"itsa-selectlist-selected";},renderUI:function(){var t=this,p=t.get("contentBox"),m=t.get("boundingBox"),o=t.get("className"),l=t.get("iconClassName"),r=t.get("buttonWidth"),s=t.get("listWidth"),q=t.get("btnSize"),n;if((f>0)&&(f<7)){m.append(t.SHIM_TEMPLATE);}t.buttonNode=a.Node.create(k);p.append(t.buttonNode);t.buttonNode.setHTML(e);t._selectedMainItemNode=a.Node.create(h);t.buttonNode.append(t._selectedMainItemNode);t._itemsContainerNode=a.Node.create(i);t.get("listAlignLeft")?m.addClass("itsa-leftalign"):m.addClass("itsa-rightalign");if(o){m.addClass(o);}if(l){t._selectedMainItemNode.addClass("itsa-button-icon");t._selectedMainItemNode.addClass(l);}if(r){t.buttonNode.setStyle("minWidth",r+"px");}if(s){t._itemsContainerNode.setStyle("width",s+"px");}if(q===1){m.addClass("itsa-buttonsize-small");}else{if(q===2){m.addClass("itsa-buttonsize-medium");}}p.append(t._itemsContainerNode);},bindUI:function(){var l=this,m=l.get("boundingBox");m.on("click",l._toggleListbox,l);m.on("clickoutside",l.hideListbox,l);l._itemsContainerNode.delegate("click",l._itemClick,"li",l);l.on("disabledChange",l._disabledChange,l);},syncUI:function(){var u=this,q=u.get("contentBox"),p=u.get("items"),r=u.get("defaultItem"),m=u._itemsContainerNode.one(".itsa-selectlist-ullist"),n,v,t,o,l,s;m.setHTML("");if(p.length>0){for(n=0;n<p.length;n++){v=p[n];t=d.isString(v)?t=v:t=v.text;o=(t===r);if(o){l=true;}s=a.Node.create("<li"+((o)?' class="'+u._selectedItemClass+'"':"")+">"+t+"</li>");if(v.returnValue){s.setData("returnValue",v.returnValue);}m.append(s);}u._selectedMainItemNode.setHTML((u.get("selectionOnButton")&&l)?r:u.get("defaultButtonText"));}u._syncWithinSetterItems=true;},_itemClick:function(l){this._selectItem(l.currentTarget,true);},selectItem:function(n,p,m){var l=this,o=l._itemsContainerNode.all("li");if(!l.get("disabled")){if((n>=0)&&(n<o.size())){l._selectItem(o.item(n));}else{if(p){o.removeClass(l._selectedItemClass);if(l.get("selectionOnButton")){l._selectedMainItemNode.setHTML(m?m:l.get("defaultButtonText"));}}}}},selectItemByValue:function(m,p,o){var l=this,n=a.Array.indexOf(l._itemValues,m.toString().toLowerCase());l.selectItem(n,p,o?l.get("defaultButtonText"):m);},_selectItem:function(n,p){var l=this,m=l._itemsContainerNode.one("li."+l._selectedItemClass),o;if(!l.get("disabled")&&n&&(n!==m)){if(m){m.removeClass(l._selectedItemClass);}n.addClass(l._selectedItemClass);o=n.getHTML();if(l.get("selectionOnButton")){l._selectedMainItemNode.setHTML(o);}l.fire("valueChange",{currentTarget:n,value:n.getData("returnValue")||o,index:l._indexOf(n)});if(p){l.fire("selectChange",{currentTarget:n,value:n.getData("returnValue")||o,index:l._indexOf(n)});}}},hideListbox:function(){var l=this;if(!l.get("disabled")){l.fire("hide");l._itemsContainerNode.toggleClass(j,true);}},showListbox:function(){var l=this;if(!l.get("disabled")){l.fire("show");l._itemsContainerNode.toggleClass(j,false);}},_toggleListbox:function(){var l=this;if(l._itemsContainerNode.hasClass(j)){l.showListbox();}else{l.hideListbox();}},currentSelected:function(){return this._itemsContainerNode.one("li."+this._selectedItemClass);},currentIndex:function(){return this._indexOf(this.currentSelected());},_indexOf:function(m){var l=this._itemsContainerNode.one(".itsa-selectlist-ullist").all("li");return l.indexOf(m);},_disabledChange:function(m){var l=this;l.buttonNode.toggleClass("yui3-button-disabled",m.newVal);l.hideListbox();},destructor:function(){this.get("contentBox").empty();}},{ATTRS:{btnSize:{value:3,validator:function(l){return(d.isNumber(l)&&(l>0)&&(l<4));}},defaultButtonText:{value:"choose...",validator:function(l){return a.Lang.isString(l);}},buttonWidth:{value:null,validator:function(l){return(a.Lang.isNumber(l)&&(l>=0));}},listWidth:{value:null,validator:function(l){return(a.Lang.isNumber(l)&&(l>=0));}},listAlignLeft:{value:true,validator:function(l){return a.Lang.isBoolean(l);}},className:{value:null,validator:function(l){return a.Lang.isString(l);}},iconClassName:{value:null,validator:function(l){return a.Lang.isString(l);}},items:{value:[],validator:function(l){return a.Lang.isArray(l);},setter:function(o){var l=this,n,m;l._itemValues=[];for(m=0;m<o.length;m++){n=o[m];l._itemValues.push(n.returnValue?n.returnValue.toString().toLowerCase():n.toString().toLowerCase());}if(this._syncWithinSetterItems){this.syncUI();}return o;}},defaultItem:{value:null,validator:function(l){return a.Lang.isString(l);}},selectionOnButton:{value:true,validator:function(l){return a.Lang.isBoolean(l);}},hideSelected:{value:false,validator:function(l){return a.Lang.isBoolean(l);},setter:function(m){var l=this;l._selectedItemClass=m?j:"itsa-selectlist-selected";return m;}}}});},"gallery-2012.09.26-20-36",{requires:["base-build","widget-base","node-base","cssbutton","event-base","node-event-delegate","event-outside"],skinnable:true});